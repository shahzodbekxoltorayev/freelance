!function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var l;!function(e){e.EVENT_TRACKED="eventTracked",e.EVENT_REGISTERED="eventRegistered"}(l||(l={}));var f=function(){function e(){t(this,e)}return r(e,[{key:"log",value:function(e,t){var n=new CustomEvent(e.toString(),{detail:{data:t}});document.dispatchEvent(n)}}]),e}(),h=function(){function e(n,r,i){t(this,e),this.event=n,this.element=r,this.callback=i}return r(e,[{key:"handler",value:function(e){}},{key:"init",value:function(){var e=this;return this.handler=function(t){e.callback()},this.element.addEventListener(this.event,this.handler),this}},{key:"remove",value:function(){this.element.removeEventListener(this.event,this.handler)}}]),e}(),d=function(){function e(n,r){t(this,e),this.logger=n,this.tracker=r,this.bindings={}}return r(e,[{key:"register",value:function(e,t){this.bindings[e]||(this.bindings[e]=[]),this.bindings[e].push(t)}},{key:"listen",value:function(e){var t=this,n=e.event,r=e.element,i=e.data,o=function(){return t.tracker.modifyEvent(i instanceof Function?i():i)};return new Promise(function(e){var i=(t.bindings[n]||[h]).map(function(e){return new e(n,r,function(){return t.tracker.track(o())}).init()});t.logger.log(l.EVENT_REGISTERED,o()),e(i)})}}]),e}(),p=function(){function e(){t(this,e),this.subscribers={}}return r(e,[{key:"publish",value:function(e){if(this.subscribers[e.type])return this.subscribers[e.type].forEach(function(t){return t.handle(e)}),this}},{key:"subscribe",value:function(e,t){return this.subscribers[t]||(this.subscribers[t]=[]),-1===this.subscribers[t].indexOf(e)&&this.subscribers[t].push(e),this}}]),e}(),v=function(){function e(){t(this,e)}return r(e,[{key:"handle",value:function(e){this.bus&&this.isHandleable(e)&&this.bus.publish(this.getEvent(e))}}]),e}(),y=function(){function e(n){t(this,e),this.userContext=n}return r(e,[{key:"getCookie",value:function(e){var t=document.cookie.split(/;\s*/).map(function(e){return e.split("=",2)}).filter(function(t){return t[0]===e});return t.length?decodeURI(t[0][1]):null}},{key:"isTouchScreen",value:function(){return!!("ontouchstart"in document.documentElement||window.DocumentTouch&&document instanceof DocumentTouch)}},{key:"getBrowserPayload",value:function(){return{recognized:this.getCookie("recognized"),touch_screen:this.isTouchScreen()}}},{key:"getUserContextData",value:function(){return this.userContext}},{key:"getBackendPayload",value:function(){return window.Applet&&window.Applet.getVar("event_data")||{}}},{key:"getData",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.assign({},n.reduce(function(e,t){return Object.assign(e,t)},{}),e)}},{key:"merge",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Object.assign.apply(null,t.concat([{}]).reverse());return Object.keys(r).reduce(function(e,n){return Object.assign(e,i({},n,t.reduce(function(e,t){return t&&void 0!==t[n]?t[n]:e},r[n])))},{})}},{key:"handle",value:function(e){var t=this.getBackendPayload(),n=this.getBrowserPayload(),r=this.getUserContextData();this.send(this.merge(t,e,{data:this.getData(e.data,n,r,t.data)}))}}]),e}(),g=function(){function e(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;t(this,e),this.bus=n,this.logger=r,this.config=i,this.publishers=[],this.subscribers={}}return r(e,[{key:"addPublisher",value:function(e){return e.bus=this.bus,this.publishers.push(e),this}},{key:"addSubscriber",value:function(e,t){var n=this;return t.forEach(function(t){n.subscribers[t]||(n.subscribers[t]=[]),-1===n.subscribers[t].indexOf(e)&&(n.subscribers[t].push(e),n.bus.subscribe(e,t))}),this}},{key:"getLocation",value:function(e){var t=e.location||e.trackingLocation,n=this.config.upTracking&&this.config.upTracking.location,r=(this.config.Applet&&this.config.Applet.getVar("event_data")||{}).location,i=e.locationDefault||e.trackingLocationDefault;return t||n||r||i}},{key:"track",value:function(e){var t=this;e["trackingEvent"in e?"trackingLocation":"location"]=this.getLocation(e);var n=this.modifyEvent(e);return new Promise(function(e){t.publishers.forEach(function(e){e.handle(n)}),t.logger.log(l.EVENT_TRACKED,n),e()})}},{key:"setLocation",value:function(e){this.config.upTracking=this.config.upTracking||{},this.config.upTracking.location=e}},{key:"modifyEvent",value:function(e){return this.config.upTracking?(this.config.upTracking.eventModifiers||[]).reduce(function(e,t){return t instanceof Function?t(e):e},e):e}}]),e}(),b=function(){function e(n,r){t(this,e),this.trackedElements=new WeakSet,this.binder=n,this.document=r,this.installObserver()}return r(e,[{key:"installObserver",value:function(){var e,t=this;if(this.document.body&&!this.document.body.getAttribute("scanner-registered")){if(window.MutationObserver)new MutationObserver(function(){e&&clearTimeout(e),e=setTimeout(function(){return t.scan()},60)}).observe(this.document,{childList:!0,subtree:!0});this.scan(),this.document.body.setAttribute("scanner-registered",!0)}}},{key:"scan",value:function(){var e=this,t=this.document,n="[track]:not([event-registered])";if(null===t.querySelector(n))return!1;t.querySelectorAll(n).forEach(function(t){if(!e.trackedElements.has(t)){e.trackedElements.add(t);var n=e.getTrackAttrs(t);if(!n.event)throw["Invalid event instrumentation",t];t.setAttribute("event-registered","true"),e.binder.listen({event:n.event,element:t,data:function(){return e.getTrackAttrs(t)}})}})}},{key:"getTrackAttrs",value:function(e){var t={},n=Array.from(e.attributes).filter(function(e){return e.name.indexOf("track-")>-1&&"track"!==e.name}).reduce(function(e,t){return e[t.name.replace("track-","")]=t.value,e},{});if((t=Object.assign({},t,n)).data)try{t.data=JSON.parse(t.data.replace(/\\(.?)/g,function(e,t){switch(t){case"\\":return"\\";case"0":return"\0";case"":return"";default:return t}}))}catch(e){console.error("Event binder: event data format error",e),t.data=null}return t}}]),e}();var m,k=function(e){function n(){return t(this,n),c(this,a(n).apply(this,arguments))}return o(n,h),r(n,[{key:"init",value:function(){var e=this;return this.handler=function(t){13!==t.keyCode&&"Enter"!==t.key&&"Enter"!==t.code||e.callback()},this.element.addEventListener("keydown",this.handler),this}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.handler)}}]),n}(),w=function(){function e(){t(this,e),this.observations=[],this.observer=new IntersectionObserver(this.callback.bind(this),this.getOptions())}return r(e,[{key:"getOptions",value:function(){return{root:null,rootMargin:"0px",threshold:function(){for(var e=[],t=0;t<=100;t++)e.push(t/100);return e}()}}},{key:"callback",value:function(e){var t=this;e.forEach(function(e){for(var n=0;n<t.observations.length;n++)e.target===t.observations[n].element&&t.observations[n].callback(100*e.intersectionRatio)})}},{key:"observe",value:function(e,t){this.observations.push({element:e,callback:t}),this.observer.observe(e)}},{key:"unobserve",value:function(e){for(var t=0;t<this.observations.length;t++)if(e===this.observations[t].element){this.observer.unobserve(e),this.observations.splice(t,1);break}}}]),e}(),E=function(e){function n(){var e;return t(this,n),(e=c(this,a(n).apply(this,arguments))).checking=!1,e}return o(n,h),r(n,[{key:"init",value:function(){return this.observer=n.getObserver(),this.target=this.getTarget(),this.observer.observe(this.target,this.update.bind(this)),this}},{key:"getTarget",value:function(){return"tracking"===this.element.tagName.toLowerCase()?this.element.parentElement:this.element}},{key:"update",value:function(e){this.ratio=e,this.check()}},{key:"check",value:function(){var e=this;this.checking||(this.checking=!0,setTimeout(function(){e.ratio>0&&e.trigger(),e.checking=!1},1e3))}},{key:"trigger",value:function(){this.callback(),this.observer.unobserve(this.target)}}],[{key:"getObserver",value:function(){return this.observer||(this.observer=new w),this.observer}}]),n}(),_=function(e){function n(){return t(this,n),c(this,a(n).apply(this,arguments))}return o(n,h),r(n,[{key:"init",value:function(){var e=this;return this.handler=function(){e.callback()},-1!==["interactive","complete"].indexOf(document.readyState)?this.callback():window.addEventListener("DOMContentLoaded",this.handler),this}},{key:"remove",value:function(){window.removeEventListener("DOMContentLoaded",this.handler)}}]),n}(),O=function(e){return-1!==window.navigator.platform.indexOf("Mac")?e.metaKey||e.shiftKey:e.ctrlKey||e.shiftKey},T=function(e){function n(){return t(this,n),c(this,a(n).apply(this,arguments))}return o(n,h),r(n,[{key:"init",value:function(){var e=this;return this.handler=function(t){O(t)&&e.callback()},this.element.addEventListener("click",this.handler),this}},{key:"remove",value:function(){this.element.removeEventListener("click",this.handler)}}]),n}(),A=function(e){function n(){return t(this,n),c(this,a(n).apply(this,arguments))}return o(n,h),r(n,[{key:"init",value:function(){var e=this;return this.handler=function(t){O(t)||e.callback()},this.element.addEventListener("click",this.handler),this}},{key:"remove",value:function(){this.element.removeEventListener("click",this.handler)}}]),n}(),x=function(e){function n(){return t(this,n),c(this,a(n).apply(this,arguments))}return o(n,h),r(n,[{key:"init",value:function(){var e=this;return this.handler=function(){e.callback()},window.addEventListener("beforeunload",this.handler),this}},{key:"remove",value:function(){window.removeEventListener("beforeunload",this.handler)}}]),n}(),R=function(e){function n(){return t(this,n),c(this,a(n).apply(this,arguments))}return o(n,v),r(n,[{key:"isHandleable",value:function(e){return e.event&&(!Array.isArray(e.trackers)||!e.trackers.length||e.trackers.indexOf("gtm")>-1)}},{key:"getEvent",value:function(e){return{type:"gtm",gtmEvent:e.gtmEvent,event:e.event,sublocation:e.sublocation,label:e.label||e.element,value:e.value,data:e.data}}}]),n}(),S=function(e){function n(){return t(this,n),c(this,a(n).apply(this,arguments))}return o(n,v),r(n,[{key:"isHandleable",value:function(e){return e.trackingEvent&&(1==+e.trackingGtm||!e.hasOwnProperty("trackingGtm"))}},{key:"getEvent",value:function(e){return{type:"gtm",gtmEvent:e.trackingGtmEvent,event:e.trackingEventAlias||e.trackingEvent,sublocation:e.trackingSublocation,label:e.trackingLabel||e.trackingElement,value:e.trackingValue,data:e.trackingData}}}]),n}(),L=function(e){function n(){return t(this,n),c(this,a(n).apply(this,arguments))}return o(n,y),r(n,[{key:"normalize",value:function(e){return Object.assign({},e.data,{event:e.gtmEvent||"ga",eventAction:e.event||" ",eventCategory:e.sublocation||" ",eventLabel:e.label||" ",eventValue:e.value||" "})}},{key:"send",value:function(e){var t=window.dataLayer;t&&t.push(this.normalize(e))}}]),n}(),j=function(e){function n(){return t(this,n),c(this,a(n).apply(this,arguments))}return o(n,v),r(n,[{key:"isHandleable",value:function(e){return e.event&&(!Array.isArray(e.trackers)||!e.trackers.length||e.trackers.indexOf("olog")>-1)}},{key:"getEvent",value:function(e){return{type:"olog",event:e.event,location:e.location,locationDefault:e.locationDefault,sublocation:e.sublocation,label:e.label||e.element,data:e.data}}}]),n}(),C=function(e){function n(){return t(this,n),c(this,a(n).apply(this,arguments))}return o(n,v),r(n,[{key:"isHandleable",value:function(e){return!!e.ologEvent||e.trackingEvent&&(1==+e.trackingOlog||!e.hasOwnProperty("trackingOlog"))}},{key:"getEvent",value:function(e){return{type:"olog",event:e.ologEvent||e.trackingEventAlias||e.trackingEvent,location:e.ologLocation||e.trackingLocation,locationDefault:e.trackingLocationDefault,sublocation:e.ologSublocation||e.trackingSublocation,label:e.trackingLabel||e.trackingElement,referrer:e.ologReferrer,data:e.ologData||e.trackingData}}}]),n}(),P=function(e){function n(e,r){var i;return t(this,n),(i=c(this,a(n).call(this,{user_uid:e.config.userUid,organization_uid:e.config.organizationUid,visitor_id:e.config.visitorId}))).olog=e,i.oLogEvent=r,i}return o(n,y),r(n,[{key:"getBrowserPayload",value:function(){return Object.assign(u(a(n.prototype),"getBrowserPayload",this).call(this),{userAgent:window.navigator.userAgent,language:window.navigator.language||window.navigator.userLanguage,platform:window.navigator.platform})}},{key:"getData",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return(Array.isArray(e)&&e.length?e:[e]).map(function(e){return Object.assign({},n.reduce(function(e,t){return Object.assign(e,t)},{}),e)})}},{key:"send",value:function(e){var t=new this.oLogEvent({event:e.event,location:e.location||e.locationDefault,referrer:e.referrer,sublocation:e.sublocation,data:e.data.map(function(t){return Object.assign({event_label:e.label},t)}),timestamp:+new Date});return this.olog.sendEvent(t)}}]),n}(),D=function(e){function n(){return t(this,n),c(this,a(n).apply(this,arguments))}return o(n,v),r(n,[{key:"isHandleable",value:function(e){return e.event&&(!Array.isArray(e.trackers)||!e.trackers.length||e.trackers.indexOf("snowplow")>-1)}},{key:"getEvent",value:function(e){return{type:"snowplow",event:e.event,event_label:e.label||e.element,location:e.location,locationDefault:e.locationDefault,sublocation:e.sublocation,value:e.value,data:e.data}}}]),n}(),M=function(e){function n(){return t(this,n),c(this,a(n).apply(this,arguments))}return o(n,v),r(n,[{key:"isHandleable",value:function(e){return e.trackingEvent&&(1==+e.trackingSnowplow||!e.hasOwnProperty("trackingSnowplow"))}},{key:"getEvent",value:function(e){return{type:"snowplow",event:e.trackingEventAlias||e.trackingEvent,event_label:e.trackingLabel||e.trackingElement,location:e.trackingLocation,locationDefault:e.trackingLocationDefault,sublocation:e.trackingSublocation,value:e.trackingValue,data:e.trackingData}}}]),n}(),F=function(e){function n(){return t(this,n),c(this,a(n).apply(this,arguments))}return o(n,y),r(n,[{key:"getPayload",value:function(e){var t=["type","data","locationDefault"];return this.merge({location:e.locationDefault},Object.assign(Object.keys(e).filter(function(e){return-1===t.indexOf(e)}).reduce(function(t,n){return Object.assign(t,i({},n,e[n]))},{}),e.data))}},{key:"send",value:function(e){var t=window.dataLayer;t&&t.push({event_payload:void 0},{event:"snowplow",event_payload:this.getPayload(e)})}}]),n}(),N=/bot|googlebot|crawler|spider|robot|crawling/i,I=[{name:"xs",minWidth:0,maxWidth:480},{name:"sm",minWidth:480,maxWidth:768},{name:"md",minWidth:768,maxWidth:992},{name:"lg",minWidth:992,maxWidth:1200},{name:"xl",minWidth:1200,maxWidth:Number.MAX_VALUE}],z=function(e){var t=e.innerWidth;return I.find(function(e){var n=e.minWidth,r=e.maxWidth;return t>=n&&t<r}).name};!function(e){e.IOS_APP_REFERRER="mobile_app_ios",e.ANDROID_APP_REFERRER="mobile_app_android",e.MOBILE_WEB_IOS_REFERRER="mobile_web_ios",e.MOBILE_WEB_ANDROID_REFERRER="mobile_web_android",e.MOBILE_WEB_OTHER_REFERRER="mobile_web_other",e.DESKTOP_REFERRER="desktop"}(m||(m={}));var U=function(e,t){var n,r=m.DESKTOP_REFERRER;return t&&t.platform?r="android"===(n=t.platform)?m.ANDROID_APP_REFERRER:"ios"===n?m.IOS_APP_REFERRER:void 0:function(e){var t,n=!1;return t=e.navigator.userAgent||e.navigator.vendor||e.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t.substr(0,4)))&&(n=!0),n}(e)&&(r=function(e){var t=m.MOBILE_WEB_OTHER_REFERRER;return/Android/.test(e)?t=m.MOBILE_WEB_ANDROID_REFERRER:/iPad|iPhone|iPod/.test(e)&&(t=m.MOBILE_WEB_IOS_REFERRER),t}(e.navigator.userAgent)),r},V=function(){function e(e){this.config=e;var t=this.config,n=t.userNid,r=t.visitorId;if(!n&&!r)throw Error("Unable to identify user")}return e.prototype.setApi=function(e){this.api=e},e.prototype.sendEvent=function(e,t){if(void 0===t&&(t={}),n=window.navigator.userAgent,N.test(n))return Promise.reject();var n,r=this.config,i=r.userNid,o=r.visitorId,a=r.organizationUid,s=r.mobileNativeApp,c={screensize:z(window),referrer:U(window,s),organization_uid:a};t.eventContext&&Object.assign(c,t.eventContext),e.screensize=c.screensize,e.referrer=c.referrer,"page"===e.event&&(c.log_guid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),Array.isArray(e.data)&&e.data.forEach(function(e){Object.assign(e,c)});var u={id:i||o,data:e};u.data=JSON.stringify(e);var l="/api/o2/v1/logging/:id.json".replace(":id",u.id);return this.api.url(l).options({}).headers(this.getHeaders(t)).json(u).post()},e.prototype.getHeaders=function(e){var t=this.config,n=t.XOdeskReferrer,r=t.userNid,i=t.visitorId,o=t.visitorApiKey,a={"X-Odesk-Referrer":n||"desktop"};return!r&&i&&o&&(a["X-Odesk-Visitor"]=o),e&&e.headers&&Array.isArray(e.headers)&&e.headers.forEach(function(e){Object.assign(a,e)}),a},e}(),q=function(){return function(e){var t=this;this.data=[{}],this.timestamp=e.timestamp||Date.now(),Object.keys(e).map(function(n){t[n]=e[n]})}}(),B=function(){return(B=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},H=function t(n,r,i){if(void 0===i&&(i=!1),!n||!r||"object"!==e(n)||"object"!==e(r))return n;var o=B({},n);for(var a in r)r.hasOwnProperty(a)&&(r[a]instanceof Array&&n[a]instanceof Array?o[a]=i?n[a].concat(r[a]):r[a]:"object"===e(r[a])&&"object"===e(n[a])?o[a]=t(n[a],r[a],i):o[a]=r[a]);return o},W={defaults:{},errorType:null,polyfills:{fetch:null,FormData:null,URLSearchParams:null,performance:null,PerformanceObserver:null,AbortController:null},polyfill:function(e,t){for(var n=void 0===t?{}:t,r=n.doThrow,i=void 0===r||r,o=n.instance,a=void 0!==o&&o,s=[],c=2;c<arguments.length;c++)s[c-2]=arguments[c];var u=this.polyfills[e]||("undefined"!=typeof self?self[e]:null)||("undefined"!=typeof global?global[e]:null);if(i&&!u)throw new Error(e+" is not defined");return a&&u?new(u.bind.apply(u,[void 0].concat(s))):u}},K=function(e,t,n,r){if(!e.getEntriesByName)return!1;var i=e.getEntriesByName(t);return!!(i&&i.length>0)&&(n(i.reverse()[0]),r.clearMeasures&&r.clearMeasures(t),G.callbacks.delete(t),G.callbacks.size<1&&(G.observer.disconnect(),r.clearResourceTimings&&r.clearResourceTimings()),!0)},G={callbacks:new Map,observer:null,observe:function(e,t){if(e&&t){var n=W.polyfill("performance",{doThrow:!1});(function(e,t){return!G.observer&&e&&t&&(G.observer=new t(function(t){G.callbacks.forEach(function(n,r){K(t,r,n,e)})}),e.clearResourceTimings&&e.clearResourceTimings()),G.observer})(n,W.polyfill("PerformanceObserver",{doThrow:!1}))&&(K(n,e,t,n)||(G.callbacks.size<1&&G.observer.observe({entryTypes:["resource","measure"]}),G.callbacks.set(e,t)))}}},X=function(){return(X=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},J=function(){function t(e,t,n,r,i,o){void 0===n&&(n=new Map),void 0===r&&(r=[]),void 0===i&&(i=[]),void 0===o&&(o=[]),this._url=e,this._options=t,this._catchers=n,this._resolvers=r,this._middlewares=i,this._deferredChain=o}return t.factory=function(e,n){return void 0===e&&(e=""),void 0===n&&(n={}),new t(e,n)},t.prototype.selfFactory=function(e){var n=void 0===e?{}:e,r=n.url,i=void 0===r?this._url:r,o=n.options,a=void 0===o?this._options:o,s=n.catchers,c=void 0===s?this._catchers:s,u=n.resolvers,l=void 0===u?this._resolvers:u,f=n.middlewares,h=void 0===f?this._middlewares:f,d=n.deferredChain,p=void 0===d?this._deferredChain:d;return new t(i,X({},a),new Map(c),l.slice(),h.slice(),p.slice())},t.prototype.defaults=function(e,t){return void 0===t&&(t=!1),W.defaults=t?H(W.defaults,e):e,this},t.prototype.errorType=function(e){return W.errorType=e,this},t.prototype.polyfills=function(e){return W.polyfills=X({},W.polyfills,e),this},t.prototype.url=function(e,t){if(void 0===t&&(t=!1),t)return this.selfFactory({url:e});var n=this._url.split("?");return this.selfFactory({url:n.length>1?n[0]+e+"?"+n[1]:this._url+e})},t.prototype.options=function(e,t){return void 0===t&&(t=!0),this.selfFactory({options:t?H(this._options,e):e})},t.prototype.query=function(e,t){return void 0===t&&(t=!1),this.selfFactory({url:$(this._url,e,t)})},t.prototype.headers=function(e){return this.selfFactory({options:H(this._options,{headers:e||{}})})},t.prototype.accept=function(e){return this.headers({Accept:e})},t.prototype.content=function(e){return this.headers({"Content-Type":e})},t.prototype.auth=function(e){return this.headers({Authorization:e})},t.prototype.catcher=function(e,t){var n=new Map(this._catchers);return n.set(e,t),this.selfFactory({catchers:n})},t.prototype.signal=function(e){return this.selfFactory({options:X({},this._options,{signal:e.signal})})},t.prototype.resolve=function(e,t){return void 0===t&&(t=!1),this.selfFactory({resolvers:t?[e]:this._resolvers.concat([e])})},t.prototype.defer=function(e,t){return void 0===t&&(t=!1),this.selfFactory({deferredChain:t?[e]:this._deferredChain.concat([e])})},t.prototype.middlewares=function(e,t){return void 0===t&&(t=!1),this.selfFactory({middlewares:t?e:this._middlewares.concat(e)})},t.prototype.method=function(t,n,r){void 0===n&&(n={}),void 0===r&&(r=null);var i=r?"object"===e(r)?this.json(r):this.body(r):this;return function(e){var t=e._url,n=e._catchers,r=e._resolvers,i=e._middlewares,o=e._options,a=new Map(n),s=H(W.defaults,o),c=W.polyfill("AbortController",{doThrow:!1,instance:!0});!s.signal&&c&&(s.signal=c.signal);var u={ref:null,clear:function(){u.ref&&(clearTimeout(u.ref),u.ref=null)}},l=function(e){return function(t){return 0===e.length?t:1===e.length?e[0](t):e.reduceRight(function(n,r,i){return i===e.length-2?r(n(t)):r(n)})}}(i)(W.polyfill("fetch"))(t,s),f=l.then(function(e){return u.clear(),e.ok?e:e[W.errorType||"text"]().then(function(t){var n=new Error(t);throw n[W.errorType||"text"]=t,n.status=e.status,n.response=e,n})}),h=function(t){return t.catch(function(t){if(u.clear(),a.has(t.status))return a.get(t.status)(t,e);if(a.has(t.name))return a.get(t.name)(t,e);throw t})},d=function(e){return function(t){return h(e?f.then(function(t){return t&&t[e]()}).then(function(e){return e&&t&&t(e)||e}):f.then(function(e){return e&&t&&t(e)||e}))}},p={res:d(null),json:d("json"),blob:d("blob"),formData:d("formData"),arrayBuffer:d("arrayBuffer"),text:d("text"),perfs:function(e){return l.then(function(t){return G.observe(t.url,e)}),p},setTimeout:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return void 0===t&&(t=c),u.clear(),u.ref=setTimeout(function(){return t.abort()},e),p}),controller:function(){return[c,p]},error:function(e,t){return a.set(e,t),p},badRequest:function(e){return p.error(400,e)},unauthorized:function(e){return p.error(401,e)},forbidden:function(e){return p.error(403,e)},notFound:function(e){return p.error(404,e)},timeout:function(e){return p.error(408,e)},internalError:function(e){return p.error(500,e)},onAbort:function(e){return p.error("AbortError",e)}};return r.reduce(function(t,n){return n(t,e)},p)}((i=i.options(X({},n,{method:t})))._deferredChain.reduce(function(e,t){return t(e,e._url,e._options)},i))},t.prototype.get=function(e){return this.method("GET",e)},t.prototype.delete=function(e){return this.method("DELETE",e)},t.prototype.put=function(e,t){return this.method("PUT",t,e)},t.prototype.post=function(e,t){return this.method("POST",t,e)},t.prototype.patch=function(e,t){return this.method("PATCH",t,e)},t.prototype.head=function(e){return this.method("HEAD",e)},t.prototype.opts=function(e){return this.method("OPTIONS",e)},t.prototype.replay=function(e){return this.method(this._options.method,e)},t.prototype.body=function(e){return this.selfFactory({options:X({},this._options,{body:e})})},t.prototype.json=function(e){return this.content("application/json").body(JSON.stringify(e))},t.prototype.formData=function(e){return this.body(function(e){var t=W.polyfill("FormData",{instance:!0});for(var n in e)if(e[n]instanceof Array)for(var r=0,i=e[n];r<i.length;r++){var o=i[r];t.append(n+"[]",o)}else t.append(n,e[n]);return t}(e))},t.prototype.formUrl=function(e){return this.body("string"==typeof e?e:(t=e,Object.keys(t).map(function(e){var n=t[e];return n instanceof Array?n.map(function(t){return Y(e,t)}).join("&"):Y(e,n)}).join("&"))).content("application/x-www-form-urlencoded");var t},t}(),$=function(e,t,n){var r;if("string"==typeof t)r=t;else{var i=W.polyfill("URLSearchParams",{instance:!0});for(var o in t)if(t[o]instanceof Array)for(var a=0,s=t[o];a<s.length;a++){var c=s[a];i.append(o,c)}else i.append(o,t[o]);r=i.toString()}var u=e.split("?");return n||u.length<2?u[0]+"?"+r:e+"&"+r};function Y(t,n){return encodeURIComponent(t)+"="+encodeURIComponent("object"===e(n)?JSON.stringify(n):""+n)}var Q=J.factory;Q.default=J.factory;var Z=function(){return(Z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function ee(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})}function te(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var ne=function(){return(ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},re=function t(n,r,i){if(void 0===i&&(i=!1),!n||!r||"object"!==e(n)||"object"!==e(r))return n;var o=ne({},n);for(var a in r)r.hasOwnProperty(a)&&(r[a]instanceof Array&&n[a]instanceof Array?o[a]=i?n[a].concat(r[a]):r[a]:"object"===e(r[a])&&"object"===e(n[a])?o[a]=t(n[a],r[a],i):o[a]=r[a]);return o},ie={defaults:{},errorType:null,polyfills:{fetch:null,FormData:null,URLSearchParams:null,performance:null,PerformanceObserver:null,AbortController:null},polyfill:function(e,t){for(var n=void 0===t?{}:t,r=n.doThrow,i=void 0===r||r,o=n.instance,a=void 0!==o&&o,s=[],c=2;c<arguments.length;c++)s[c-2]=arguments[c];var u=this.polyfills[e]||("undefined"!=typeof self?self[e]:null)||("undefined"!=typeof global?global[e]:null);if(i&&!u)throw new Error(e+" is not defined");return a&&u?new(u.bind.apply(u,[void 0].concat(s))):u}},oe=function(e,t,n,r){if(!e.getEntriesByName)return!1;var i=e.getEntriesByName(t);return!!(i&&i.length>0)&&(n(i.reverse()[0]),r.clearMeasures&&r.clearMeasures(t),ae.callbacks.delete(t),ae.callbacks.size<1&&(ae.observer.disconnect(),r.clearResourceTimings&&r.clearResourceTimings()),!0)},ae={callbacks:new Map,observer:null,observe:function(e,t){if(e&&t){var n=ie.polyfill("performance",{doThrow:!1});(function(e,t){return!ae.observer&&e&&t&&(ae.observer=new t(function(t){ae.callbacks.forEach(function(n,r){oe(t,r,n,e)})}),e.clearResourceTimings&&e.clearResourceTimings()),ae.observer})(n,ie.polyfill("PerformanceObserver",{doThrow:!1}))&&(oe(n,e,t,n)||(ae.callbacks.size<1&&ae.observer.observe({entryTypes:["resource","measure"]}),ae.callbacks.set(e,t)))}}},se=function(){return(se=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ce=function(){function t(e,t,n,r,i,o){void 0===n&&(n=new Map),void 0===r&&(r=[]),void 0===i&&(i=[]),void 0===o&&(o=[]),this._url=e,this._options=t,this._catchers=n,this._resolvers=r,this._middlewares=i,this._deferredChain=o}return t.factory=function(e,n){return void 0===e&&(e=""),void 0===n&&(n={}),new t(e,n)},t.prototype.selfFactory=function(e){var n=void 0===e?{}:e,r=n.url,i=void 0===r?this._url:r,o=n.options,a=void 0===o?this._options:o,s=n.catchers,c=void 0===s?this._catchers:s,u=n.resolvers,l=void 0===u?this._resolvers:u,f=n.middlewares,h=void 0===f?this._middlewares:f,d=n.deferredChain,p=void 0===d?this._deferredChain:d;return new t(i,se({},a),new Map(c),l.slice(),h.slice(),p.slice())},t.prototype.defaults=function(e,t){return void 0===t&&(t=!1),ie.defaults=t?re(ie.defaults,e):e,this},t.prototype.errorType=function(e){return ie.errorType=e,this},t.prototype.polyfills=function(e){return ie.polyfills=se({},ie.polyfills,e),this},t.prototype.url=function(e,t){if(void 0===t&&(t=!1),t)return this.selfFactory({url:e});var n=this._url.split("?");return this.selfFactory({url:n.length>1?n[0]+e+"?"+n[1]:this._url+e})},t.prototype.options=function(e,t){return void 0===t&&(t=!0),this.selfFactory({options:t?re(this._options,e):e})},t.prototype.query=function(e,t){return void 0===t&&(t=!1),this.selfFactory({url:ue(this._url,e,t)})},t.prototype.headers=function(e){return this.selfFactory({options:re(this._options,{headers:e||{}})})},t.prototype.accept=function(e){return this.headers({Accept:e})},t.prototype.content=function(e){return this.headers({"Content-Type":e})},t.prototype.auth=function(e){return this.headers({Authorization:e})},t.prototype.catcher=function(e,t){var n=new Map(this._catchers);return n.set(e,t),this.selfFactory({catchers:n})},t.prototype.signal=function(e){return this.selfFactory({options:se({},this._options,{signal:e.signal})})},t.prototype.resolve=function(e,t){return void 0===t&&(t=!1),this.selfFactory({resolvers:t?[e]:this._resolvers.concat([e])})},t.prototype.defer=function(e,t){return void 0===t&&(t=!1),this.selfFactory({deferredChain:t?[e]:this._deferredChain.concat([e])})},t.prototype.middlewares=function(e,t){return void 0===t&&(t=!1),this.selfFactory({middlewares:t?e:this._middlewares.concat(e)})},t.prototype.method=function(t,n,r){void 0===n&&(n={}),void 0===r&&(r=null);var i=r?"object"===e(r)?this.json(r):this.body(r):this;return function(e){var t=e._url,n=e._catchers,r=e._resolvers,i=e._middlewares,o=e._options,a=new Map(n),s=re(ie.defaults,o),c=ie.polyfill("AbortController",{doThrow:!1,instance:!0});!s.signal&&c&&(s.signal=c.signal);var u={ref:null,clear:function(){u.ref&&(clearTimeout(u.ref),u.ref=null)}},l=function(e){return function(t){return 0===e.length?t:1===e.length?e[0](t):e.reduceRight(function(n,r,i){return i===e.length-2?r(n(t)):r(n)})}}(i)(ie.polyfill("fetch"))(t,s),f=l.then(function(e){return u.clear(),e.ok?e:e[ie.errorType||"text"]().then(function(t){var n=new Error(t);throw n[ie.errorType||"text"]=t,n.status=e.status,n.response=e,n})}),h=function(t){return t.catch(function(t){if(u.clear(),a.has(t.status))return a.get(t.status)(t,e);if(a.has(t.name))return a.get(t.name)(t,e);throw t})},d=function(e){return function(t){return h(e?f.then(function(t){return t&&t[e]()}).then(function(e){return e&&t&&t(e)||e}):f.then(function(e){return e&&t&&t(e)||e}))}},p={res:d(null),json:d("json"),blob:d("blob"),formData:d("formData"),arrayBuffer:d("arrayBuffer"),text:d("text"),perfs:function(e){return l.then(function(t){return ae.observe(t.url,e)}),p},setTimeout:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return void 0===t&&(t=c),u.clear(),u.ref=setTimeout(function(){return t.abort()},e),p}),controller:function(){return[c,p]},error:function(e,t){return a.set(e,t),p},badRequest:function(e){return p.error(400,e)},unauthorized:function(e){return p.error(401,e)},forbidden:function(e){return p.error(403,e)},notFound:function(e){return p.error(404,e)},timeout:function(e){return p.error(408,e)},internalError:function(e){return p.error(500,e)},onAbort:function(e){return p.error("AbortError",e)}};return r.reduce(function(t,n){return n(t,e)},p)}((i=i.options(se({},n,{method:t})))._deferredChain.reduce(function(e,t){return t(e,e._url,e._options)},i))},t.prototype.get=function(e){return this.method("GET",e)},t.prototype.delete=function(e){return this.method("DELETE",e)},t.prototype.put=function(e,t){return this.method("PUT",t,e)},t.prototype.post=function(e,t){return this.method("POST",t,e)},t.prototype.patch=function(e,t){return this.method("PATCH",t,e)},t.prototype.head=function(e){return this.method("HEAD",e)},t.prototype.opts=function(e){return this.method("OPTIONS",e)},t.prototype.replay=function(e){return this.method(this._options.method,e)},t.prototype.body=function(e){return this.selfFactory({options:se({},this._options,{body:e})})},t.prototype.json=function(e){return this.content("application/json").body(JSON.stringify(e))},t.prototype.formData=function(e){return this.body(function(e){var t=ie.polyfill("FormData",{instance:!0});for(var n in e)if(e[n]instanceof Array)for(var r=0,i=e[n];r<i.length;r++){var o=i[r];t.append(n+"[]",o)}else t.append(n,e[n]);return t}(e))},t.prototype.formUrl=function(e){return this.body("string"==typeof e?e:(t=e,Object.keys(t).map(function(e){var n=t[e];return n instanceof Array?n.map(function(t){return le(e,t)}).join("&"):le(e,n)}).join("&"))).content("application/x-www-form-urlencoded");var t},t}(),ue=function(e,t,n){var r;if("string"==typeof t)r=t;else{var i=ie.polyfill("URLSearchParams",{instance:!0});for(var o in t)if(t[o]instanceof Array)for(var a=0,s=t[o];a<s.length;a++){var c=s[a];i.append(o,c)}else i.append(o,t[o]);r=i.toString()}var u=e.split("?");return n||u.length<2?u[0]+"?"+r:e+"&"+r};function le(t,n){return encodeURIComponent(t)+"="+encodeURIComponent("object"===e(n)?JSON.stringify(n):""+n)}var fe=ce.factory;function he(e,t){if(void 0===t&&(t=decodeURIComponent),"string"!=typeof e||!e)return null;var n=new RegExp("(?:^|; )"+e.replace(/[.*+?^$|[\](){}\\-]/g,"\\$&")+"(?:=([^;]*))?(?:;|$)").exec(document.cookie);return null===n?null:"function"==typeof t?t(n[1]):n[1]}fe.default=ce.factory;var de=function(e){var t=he(e);if(t)return t;console.error("Not able to provide the CCST token from the cookie.")},pe=function(e){var t="";if(e){var n=he(e);n?t=n:console.error('Unable to get CSRF token from "'+e+'" cookie.')}return t},ve=function(e){void 0===e&&(e={});var t={Accept:"application/json, text/plain, */*","x-odesk-user-agent":"oDesk LM","x-requested-with":"XMLHttpRequest"};return function(n){return function(r,i){var o,a=e.csrfTokenCookieName,s=e.csrfTokenHeaderName;return n(r,Z({},i,{headers:Z({},t,a&&"GET"!==i.method?(o={},o[s||"x-odesk-csrf-token"]=pe(a),o):{},i.headers)}))}}},ye=function(e,t){return Z({},e,{headers:Z({},e.headers,{Authorization:"Bearer "+t})})},ge=function(e){var t=e.ccstCookieName,n=e.onAuthFail;if("string"!=typeof t)throw new TypeError("Must provide ccstCookieName string value");return function(e){return function(r,i){return ee(void 0,void 0,void 0,function(){var o,a,s,c=this;return te(this,function(u){switch(u.label){case 0:return o=de(t),a=function(){return ee(c,void 0,void 0,function(){return te(this,function(a){switch(a.label){case 0:return[4,ee(void 0,void 0,void 0,function(){return te(this,function(e){return[2,fe().middlewares([ve()]).url("/ab/account-security/login").get().res()]})})];case 1:return a.sent(),void 0!==(o=de(t))?[3,4]:n?[4,n()]:[3,3];case 2:a.sent(),a.label=3;case 3:throw new TypeError("ccst token is undefined");case 4:return[2,e(r,ye(i,o))]}})})},void 0===o?[2,a()]:[4,e(r,ye(i,o))];case 1:return 401!==(s=u.sent()).status?[2,s]:[2,a()]}})})}}},be=function(e,t){return(be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var me=function(e){function t(t){var n=e.call(this,t)||this;n.config=t;var r=n.config.ccstCookieName,i=[ve()];n.config.userNid&&i.push(ge({ccstCookieName:r}));var o=Q();return o.middlewares(i),e.prototype.setApi.call(n,o),n}return function(e,t){function n(){this.constructor=e}be(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(V);var ke=function(){var e={},t=window.Applet;if(void 0!==t){if("function"==typeof t.getUser&&null!=t.getUser()&&(e.User=t.getUser(),e.userNid=e.User.getNid()),"function"==typeof t.getOrganization&&null!=t.getOrganization()&&(e.Organization=t.getOrganization(),e.organizationUid=e.Organization.getUid(),e.organizationTypeTitle=e.Organization.getTypeTitle&&e.Organization.getTypeTitle()),"function"==typeof t.getVisitorId&&null!=t.getVisitorId()){var n={getVisitorId:t.getVisitorId};e.visitorId=t.getVisitorId(),"function"==typeof t.getVisitorApiKey&&null!=t.getVisitorApiKey()&&(n.getVisitorApiKey=t.getVisitorApiKey,e.visitorApiKey=t.getVisitorApiKey()),e.Visitor=n}"function"==typeof t.getVar&&null!=t.getVar("urchinId")&&(e.EO={analytics:{urchinId:t.getVar("urchinId")}}),"function"==typeof t.getInstanceEnv&&(e.Environment=t.getInstanceEnv()),e.CsrfTokenHeaderName=t.getVar("csrfTokenHeaderName"),e.CsrfTokenCookieName=t.getVar("csrfTokenCookieName"),e.PageId=t.getVar("pageId"),e.ccstCookieName=t.getVar("ccstCookieName"),e.disputesASIntegration=t.getVar("disputesASIntegration"),e.NotificationASIntegration=t.getVar("NotificationASIntegration"),e.XOdeskReferrer=t.getVar("XOdeskReferrer"),e.CI7646GraphqlSmf=t.getVar("CI7646GraphqlSmf"),e.mobileNativeApp=t.getVar("mobile_native_app")}return e}(),we={userUid:ke.User?ke.User.getUid():null,userNid:ke.userNid,organizationUid:ke.organizationUid,visitorId:ke.visitorId,visitorApiKey:ke.visitorApiKey,mobileNativeApp:ke.mobileNativeApp,ccstCookieName:ke.ccstCookieName,XOdeskReferrer:ke.XOdeskReferrer},Ee={user_uid:ke.User?ke.User.getUid():null,organization_uid:ke.Organization?ke.Organization.getUid():null,visitor_id:ke.visitorId,organization_type_title:ke.organizationTypeTitle},_e=new f,Oe=new g(new p,_e),Te=new d(_e,Oe),Ae=new me(we);Te.register("enter",k),Te.register("impression",E),Te.register("page-impression",_),Te.register("page-load",_),Te.register("page-unload",x),Te.register("clickLink",A),Te.register("clickLinkNewContext",T),Oe.addPublisher(new R).addPublisher(new S).addSubscriber(new L(Ee),["gtm"]).addPublisher(new D).addPublisher(new M).addSubscriber(new F(Ee),["snowplow"]).addPublisher(new j).addPublisher(new C).addSubscriber(new P(Ae,q),["olog"]);const xe={jobs:{label:"Jobs",url:"/search/jobs/",placeholder:"Find Jobs",searchLabel:"job_search"},fls:{label:"Freelancers & Agencies",url:"/search/profiles/",placeholder:"Find Freelancers & Agencies",searchLabel:"fl_search"}},Re="\n  .dropdown-menu {\n    pointer-events: auto;\n    width: 100%;\n  }\n  .navbar-search-open { z-index: 3!important; }\n  .dropdown-menu.open {\n    display: block;\n  }\n";class Se{constructor(e,t,n,r){this.navElement=t,this.element=e,this.document=n,this.topSearch=e.hasAttribute("mobile-top-search"),this.searchMenuEl=e.querySelector(".dropdown-menu"),this.applyMobileSearchToggle(),this.applyDropdownElementsClick(),this.applyFormSubmitTracking(r),this.applyStyles(),this.applyOuterClick(),this.topSearch&&this.applyMobileOpenCloseHandlers(r)}applyOuterClick(){this.document.addEventListener("click",e=>{this.searchMenuEl.classList.contains("open")&&!e.target.closest(".input-group-search-dropdown")&&this.closeDropdownMenu()})}applyMobileOpenCloseHandlers(e){this.element.querySelector(".navbar-search-open .glyphicon").addEventListener("click",()=>{this.navElement.classList.contains("search-is-open")||(e.track({event:"click","location-default":"vs",label:"search",sublocation:"primary_nav_bar"}),this.navElement.classList.add("search-is-open"))}),this.element.querySelector(".navbar-search-close").addEventListener("click",()=>{this.navElement.classList.remove("search-is-open")})}applyMobileSearchToggle(){const e=this.element.querySelector(".dropdown-toggle");e&&e.addEventListener("click",()=>{this.searchMenuEl.classList.toggle("open"),this.searchMenuEl.appendChild(this.searchMenuEl.querySelector("li:not(.active)"))})}applyDropdownElementsClick(){[...this.searchMenuEl.children].forEach(e=>{e.addEventListener("click",()=>{const t=xe[e.getAttribute("search-type")];this.element.querySelector(".form-control").setAttribute("placeholder",t.placeholder),this.element.querySelector(".form-control").focus(),[...this.searchMenuEl.children].forEach(t=>t===e?t.classList.add("active"):t.classList.remove("active")),this.element.setAttribute("action",t.url),this.closeDropdownMenu()})})}closeDropdownMenu(){this.searchMenuEl.classList.remove("open")}applyFormSubmitTracking(e){this.element.addEventListener("submit",()=>{const t=Object.keys(xe).reduce((e,t)=>xe[t].url===this.element.getAttribute("action")?xe[t].searchLabel:e,"");e.track({event:"submit","location-default":"vs",sublocation:"primary_nav_bar",label:t,data:{query:this.element.querySelector(".form-control").value}})})}applyStyles(){if(this.document.querySelector(".header-search-styles"))return;const e=this.document.createElement("style");e.classList.add("header-search-styles"),e.innerHTML=Re,this.document.querySelector("head").appendChild(e)}}class Le{constructor(e,t,n){this.headerElement=e,this.window=t,this.tracker=n,this.hasHero=e.getAttribute("has-hero"),this.headerElement.querySelectorAll(".header-search").forEach(e=>{new Se(e,this.headerElement,this.window.document,n)}),this.applyStickyNavbar(),this.applyOffCanvasToggle(),this.applyMobileSubnavToggle(),this.applyLogoClick(),this.applySublocationModifier()}applyStickyNavbar(){this.window.addEventListener("scroll",function(e,t){let n=!1;return function r(){n||(e.apply(this),n=!0,setTimeout(()=>{n=!1,r.apply()},t))}}(()=>{this.headerElement.classList.toggle("navbar-fixed-active",this.window.scrollY>0)},50))}applyOffCanvasToggle(){const e=()=>{this.window.document.documentElement.classList.toggle("navbar-is-open")};this.headerElement.querySelectorAll(".navbar-toggle").forEach(t=>t.addEventListener("click",e))}applyMobileSubnavToggle(){const e=this.headerElement.querySelector(".mobile-subnav-handler");e&&e.addEventListener("click",()=>{e.classList.toggle("active"),e.setAttribute("aria-expanded",e.classList.contains("active"))})}applySublocationModifier(){this.window.upTracking||(this.window.upTracking={}),Array.isArray(this.window.upTracking.eventModifiers)||(this.window.upTracking.eventModifiers=[]),this.window.upTracking.eventModifiers.push(e=>{if("primary_nav_bar"===e.sublocation){const t=this.headerElement.classList.contains("navbar-fixed-active")?"sticky_nav_bar":"primary_nav_bar";e.sublocation=t}return"primary_nav_bar"===e.sublocation&&this.window.matchMedia("(max-width: 992px)").matches&&(e.sublocation="mobile_nav"),e})}applyLogoClick(){this.headerElement.querySelector(".navbar-brand").addEventListener("click",()=>{let e="upwork_logo_image";if(this.window.matchMedia("(max-width: 992px)").matches){const t=this.hasHero?350:0;this.window.scrollY>t&&(e="sticky_nav_upwork_logo_image")}this.tracker.track({sublocation:"primary_nav_bar",label:e,event:"click",locationDefault:"vs"})})}}!function(e,t){t.body.eventScannerFired||null===t.querySelector("[track]")||(new b(e,t),t.body.eventScannerFired=!0)}(Te,document),[...document.querySelectorAll("nav")].forEach(e=>{new Le(e,window,Oe)})}();